<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<title>Identificador de Cavalos</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f2f2f2;
    padding: 20px;
  }

  .horse-card {
    background: white;
    padding: 15px;
    border-radius: 12px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    margin-bottom: 20px;
  }

  .label { font-weight: bold; margin-top: 10px; }
  .value { margin-left: 10px; }

  .btn {
    padding: 8px 14px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    margin-top: 10px;
  }

  #addHorseBtn {
    background: #4a7cff;
    color: white;
    font-size: 16px;
    margin-bottom: 20px;
  }

  .editBtn { background: #ffc107; }
  .deleteBtn { background: #e74c3c; color: white; }

  /* Modal */
  #modalBg {
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.5);
    backdrop-filter:blur(3px);
    justify-content:center;
    align-items:center;
  }

  #modalBox {
    background:white;
    padding:20px;
    border-radius:12px;
    width:300px;
    box-shadow:0 4px 12px rgba(0,0,0,0.2);
  }

  input {
    width:100%;
    padding:6px;
    margin-bottom:10px;
    border-radius:6px;
    border:1px solid #ccc;
  }
</style>
</head>
<body>

<button id="addHorseBtn" class="btn">Adicionar Cavalo</button>

<div id="modalBg">
  <div id="modalBox">
    <h3 id="modalTitulo">Adicionar Cavalo</h3>

    <input id="inNome" placeholder="Nome" />
    <input id="inPai" placeholder="Pai" />
    <input id="inMae" placeholder="Mãe" />
    <input id="inCopas" type="number" placeholder="Copas Ganhas" />

    <button id="btnSalvar" class="btn" style="background:#4a7cff;color:white;">Salvar</button>
    <button id="btnCancelar" class="btn" style="background:#bbb;">Cancelar</button>
  </div>
</div>

<script>
  const modal = document.getElementById('modalBg');
  const addBtn = document.getElementById('addHorseBtn');
  const salvar = document.getElementById('btnSalvar');
  const cancelar = document.getElementById('btnCancelar');

  let editIndex = null; // se for edição, guarda o índice

  function abrirModal(edicao = false, dados = {}) {
    modal.style.display = 'flex';
    document.getElementById('inNome').value = dados.nome || "";
    document.getElementById('inPai').value = dados.pai || "";
    document.getElementById('inMae').value = dados.mae || "";
    document.getElementById('inCopas').value = dados.copas || "";
    document.getElementById('modalTitulo').innerText = edicao ? "Editar Cavalo" : "Adicionar Cavalo";
  }

  addBtn.onclick = () => {
    editIndex = null;
    abrirModal(false);
  };

  cancelar.onclick = () => modal.style.display = 'none';

  function salvarLista(cavalos) {
    localStorage.setItem('cavalos', JSON.stringify(cavalos));
  }

  function carregarLista() {
    return JSON.parse(localStorage.getItem('cavalos') || '[]');
  }

  function atualizarTela() {
    document.querySelectorAll('.horse-card').forEach(e => e.remove());
    const lista = carregarLista();

    lista.forEach((cavalo, index) => {
      const card = document.createElement('div');
      card.className = 'horse-card';

      card.innerHTML = `
        <div class="label">Nome</div><div class="value">${cavalo.nome}</div>
        <div class="label">Pai</div><div class="value">${cavalo.pai}</div>
        <div class="label">Mãe</div><div class="value">${cavalo.mae}</div>
        <div class="label">Copas</div><div class="value">${cavalo.copas}</div>
        <button class="btn editBtn">Editar</button>
        <button class="btn deleteBtn">Excluir</button>
      `;

      card.querySelector('.editBtn').onclick = () => {
        editIndex = index;
        abrirModal(true, cavalo);
      };

      card.querySelector('.deleteBtn').onclick = () => {
        const novaLista = carregarLista();
        novaLista.splice(index, 1);
        salvarLista(novaLista);
        atualizarTela();
      };

      document.body.insertBefore(card, addBtn.nextSibling);
    });
  }

  salvar.onclick = () => {
    const nome = document.getElementById('inNome').value.trim();
    if (!nome) return alert('Digite o nome do cavalo.');

    const novo = {
      nome,
      pai: document.getElementById('inPai').value.trim(),
      mae: document.getElementById('inMae').value.trim(),
      copas: document.getElementById('inCopas').value.trim() || '0'
    };

    const lista = carregarLista();

    if (editIndex === null) {
      lista.push(novo);
    } else {
      lista[editIndex] = novo;
    }

    salvarLista(lista);
    atualizarTela();
    modal.style.display = 'none';
  };

  window.onload = atualizarTela;
</script>

</body>
</html>
